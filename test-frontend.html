<!DOCTYPE html>
<html>
<head>
    <title>CHT Frontend Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug { background: #f0f0f0; padding: 10px; margin: 10px 0; border-left: 4px solid #0073aa; }
        #cht-visual-comments-app { border: 2px solid red; min-height: 100px; margin: 20px 0; }
        #test-results { background: #fff; border: 1px solid #ccc; padding: 15px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>CHT Frontend Debug Test</h1>
    
    <div class="debug">
        <h3>Test Results:</h3>
        <div id="test-results">
            <p>Tests will appear here...</p>
        </div>
    </div>
    
    <div class="debug">
        <h3>App Container:</h3>
        <div id="cht-visual-comments-app-wrapper">
            <p>React app container should appear below this line:</p>
            <!-- Container will be inserted here -->
        </div>
    </div>

    <script>
        console.log('Test page loaded');
        
        // Mock chtAjax object like WordPress provides
        window.chtAjax = {
            ajaxUrl: "https://analogprods.test/client-handoff/wp-admin/admin-ajax.php",
            nonce: "3cbf37b3ad",
            postId: "1",
            pageUrl: "https://analogprods.test/client-handoff/hello-world/",
            currentUser: [],
            canManageComments: "",
            strings: {
                addComment: "Add Comment",
                saveComment: "Save Comment",
                cancel: "Cancel",
                reply: "Reply",
                delete: "Delete",
                confirmDelete: "Are you sure you want to delete this comment?",
                commentSaved: "Comment saved successfully!",
                errorSaving: "Error saving comment",
                statusUpdated: "Status updated successfully!",
                errorUpdatingStatus: "Error updating status",
                replyAdded: "Reply added successfully!",
                errorAddingReply: "Error adding reply",
                commentDeleted: "Comment deleted successfully!",
                errorDeleting: "Error deleting comment"
            }
        };
        
        function updateTestResults(message) {
            const results = document.getElementById('test-results');
            const p = document.createElement('p');
            p.textContent = new Date().toLocaleTimeString() + ': ' + message;
            results.appendChild(p);
            console.log('CHT Test:', message);
        }
        
        // Check if container appears
        const checkForContainer = setInterval(() => {
            const container = document.getElementById('cht-visual-comments-app');
            if (container) {
                updateTestResults('✅ Container found! React app should be mounting...');
                clearInterval(checkForContainer);
            }
        }, 500);
        
        // Stop checking after 10 seconds
        setTimeout(() => {
            clearInterval(checkForContainer);
            const container = document.getElementById('cht-visual-comments-app');
            if (!container) {
                updateTestResults('❌ Container not found after 10 seconds');
            }
        }, 10000);
        
        updateTestResults('Page initialized, chtAjax available: ' + (typeof chtAjax !== 'undefined'));
    </script>
    
    <!-- Load the built frontend script -->
    <script src="https://analogprods.test/client-handoff/wp-content/plugins/analogwp-client-handoff/build/frontend.js"></script>
</body>
</html>